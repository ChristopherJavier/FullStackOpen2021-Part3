{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Filter","handler","search","value","onChange","PersonForm","props","onSubmit","handlerAP","name","handlerNC","number","handlerAN","type","Persons","persons","filter","toLowerCase","includes","map","onClick","clickChild","Notification","classN","notificationMessage","errorN","className","App","useState","setPersons","newName","setNewName","tNumber","setTNumber","setSearch","setNotificationMessage","error","setError","useEffect","console","log","personsService","initialPersons","updatePerson","personIndex","findIndex","person","personsUpObject","returnedPersons","handlerNotification","catch","errorHandler","setTimeout","event","target","preventDefault","nameVef","some","p","personsObject","alert","idNV","find","window","confirm","concat","newPersonAdder","n","deletePerson","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c2b78a66.chunk.js","sourcesContent":["/* This is the module that controls the communication with the server \nand the petition that are make to the server.\nThe axios petitions and promise are make by getAll, create, deleteR and update functions.\nThis is part of the 2.16: Phonebook step8 exercise*/\nimport axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\n const deleteR = id => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, deleteR, update }","import React, { useState, useEffect } from 'react'\nimport personsService from './services/persons'\n\n/* This is the component that render the search field\nand receives the search data from the state in the App component,\nalso has a call to the handler of the changes of the input in the App component.\nThis is part of the 2.10: The Phonebook Step5 exercise*/\nconst Filter = ({ handler }, { search }) => {\n  return (\n    <>\n      filter shown with <input value={search}\n        onChange={handler}\n      />\n    </>\n  )\n}\n\n/* This is the component that render the form for add new persons to the phonebook,\nreceives the data from name and number of this states in the App component.\nAlso has several calls for the handlers of the name and number input changes.\nThis is part of the 2.10: The Phonebook Step5 exercise*/\nconst PersonForm = (props) => {\n\n  return (\n    <>\n      <form onSubmit={props.handlerAP}>\n        <div>\n          name: <input value={props.name}\n            onChange={props.handlerNC}\n          />\n        </div>\n        {/* This is the input for the number was added on the 2.8: The Phonebook Step3 exercise*/}\n        <div>\n          number: <input value={props.number}\n            onChange={props.handlerAN}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </>\n  )\n}\n\n/* This is the component that render data from the phonebook,\nreceives data from persons states in the App component.\nThis is part of the 2.10: The Phonebook Step5 exercise*/\nconst Persons = (props) => {\n\n  return (\n    <ul>\n      {/* This map method is use for display the person's name on screen\n        This is part of the 2.6: The Phonebook Step1 exercises.\n        In the 2.9*: The Phonebook Step4 exercise was added the filter method,\n        this filter the elements of the phonebook to mach with the search term that \n        is in the input of the search field, also it can be search the name or the number.\n        In the 2.17: Phonebook step9 exercise was added, the button delete,\n        it's send the value of id to the handler that the handler send to the deletePerson.*/}\n      {props.persons.filter((value) => {\n        if (props.search === \"\") {\n          return value\n        } else if (value.name.toLowerCase().includes(props.search.toLowerCase()) || value.number.toLowerCase().includes(props.search.toLowerCase())) {\n          return value\n        }\n      }).map(persons =>\n        <li key={persons.name}>\n          {persons.name}  {persons.number} <button value={persons.id} onClick={props.clickChild}>delete</button>\n        </li>\n      )}\n    </ul>\n  )\n}\n\n/* This component render the notification message when an action is successful or when and error have occurred,\nthis component receives the messages and the error boolean as props.\nIt makes a conditional render for display the notification when receives a notification message or return null.\nThis is part of the 2.19: Phonebook step11 exercise.\nIn the 2.20*: Phonebook step12 exercise was added the conditional operator for\nchange the class of the element for change the style of the message or \nif it's an error or a notification of successful action in the server.*/\nconst Notification = ({ notificationMessage, errorN }) => {\n  let classN\n\n  if (notificationMessage === null) {\n    return null\n  }\n\n  errorN\n    ? classN = \"error\"\n    : classN = \"notify\"\n\n  return (\n    <div className={classN}>\n      {notificationMessage}\n    </div>\n  )\n}\n\nconst App = () => {\n  /* This states array is part of the 2.6: The Phonebook Step1 exercises\n   and it's use for store the names of the contacts of the phonebook.\n   In the 2.9*: The Phonebook Step4 exercise were added 3 entries of data to the object.\n   In the 2.11: The Phonebook Step6 exercise the states was empty and now receives the data\n   from the use the petition that is handled by the useEffect by the axios request.*/\n  const [persons, setPersons] = useState([])\n\n  /* This states array is part of the 2.6: The Phonebook Step1 exercise\n  and store the changes of the input element and data. */\n  const [newName, setNewName] = useState('')\n\n  /* This states array is part of the 2.8: The Phonebook Step3 exercise\n  and store the changes of the input element and data.*/\n  const [tNumber, setTNumber] = useState('')\n\n  /* This states array is part of the 2.9*: The Phonebook Step4 exercise\n  and store the changes of the input for the search field.*/\n  const [search, setSearch] = useState('')\n\n  /*This states array part of the 2.19: Phonebook step11 exercise\n  and store the messages of the errors and notifications that will be display.*/\n  const [notificationMessage, setNotificationMessage] = useState(null)\n\n  /*This states array part of the 2.20*: Phonebook step12 exercise\n  and store the state of an error.*/\n  const [error, setError] = useState(false)\n\n  /* This useEffect is use for request the data \n  from the db.json that now stores the phonebook data.\n  This is part of the 2.11: The Phonebook Step6 exercise*/\n  useEffect(() => {\n    console.log('effect')\n    personsService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  /* This function saves the data of the input\n  and have and object that store the data of the input\n  that later is use for save and change the state in persons by setPersons.\n  This function also prevent the default action of submitting HTML forms.\n  This is part of the 2.6: The Phonebook Step1 exercises.\n  In the exercise 2.8: The Phonebook Step3 was added the funtionality of save the data\n  of the number input and the personsObject added the number category for save the tNumber\n  data and update the persons state.*/\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    /* newName === \"\" && alert(\"Please insert a name for the contact\")\n    tNumber === \"\" && alert(\"Please insert a number for the contact\") */\n\n    const nameVef = persons.some(p => p.name === newName)\n    const personsObject = {\n      name: newName,\n      number: tNumber\n    }\n\n    const newPersonAdder = () => {\n      /* This 'if' was added to prevent the user from being able \n   to add names that already exist in the phonebook.\n   In case that the name is already on the phonebook the app display an alert.\n   This is part of the 2.7: The Phonebook Step2 exercise.\n   Added the process that executes to send of data to the server,\n   now the new notes generate can be save in the server. \n   This request it's handled by the personsService.create\n   This is part of the 2.15: Phonebook step7 exercise\n   In the 2.18*: Phonebook step10 exercise was added the window.confirm to update the contact,\n   and a ternary operator to call the updatePerson function to change the contact info.\n   This is part of 2.18*: Phonebook step10 exercise.\n   In the 2.19: Phonebook step11 exercise was added the notification handler and the notification message.\n   In the 3.9 phonebook backend step9 exercise added the newPersonAdder \n   for fix possible problems with the communications with the backend*/\n   \n      if (nameVef) {\n        const idNV = persons.find(person => person.name === newName)\n        window.confirm(`${newName} is already on the phonebook, replace the old number with a new one?`)\n          ? updatePerson(idNV.id)\n          : setNotificationMessage(`${newName} was not changed`)\n        handlerNotification()\n      } else {\n        personsService\n          .create(personsObject)\n          .then(returnedPersons => {\n            setPersons(persons.concat(returnedPersons))\n            setNewName('')\n            setTNumber('')\n            setNotificationMessage(`Added ${personsObject.name}`)\n            handlerNotification()\n          }).catch(error => {\n            setNotificationMessage(error.response.data.error)\n            setError(true)\n            errorHandler()\n          })\n      }\n    }\n\n    newName === \"\" || tNumber === \"\"\n      ? alert(\"Please fill the name or the number if it's empty\")\n      : newPersonAdder()\n\n  }\n\n  /* This is the function that make the remove of a contact in the phonebook.\n  This request for deleting the contact in the server is made by personsService.deleteR,\n  and update the Persons state to render the changes on the page.\n  It receives the id parameter from the handlerClick.\n  This is part of the 2.17: Phonebook step9 exercise\n  Also, the id need to convert to int because of the strict comparisons\n  that was not working, because was received as a string.\n  In the 2.20*: Phonebook step12 exercise was added the catch method for a rejected promise\n  and the message for notificacion for an error and the error handler.*/\n  const deletePerson = (id) => {\n    const person = persons.find(person => person.id === id)\n\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personsService\n        .deleteR(id)\n        .then(returnedPersons => {\n          setPersons(persons.filter(n => n.id !== id))\n          setNotificationMessage(`Deleted ${person.name}`)\n          handlerNotification()\n        })\n        .catch(error => {\n          setNotificationMessage(`The Contact ${person.name} was already remove from server`)\n          setError(true)\n          errorHandler()\n          setPersons(persons.filter(p => p.id !== id))\n        })\n    }\n\n  }\n  /* This is the function that make the update of a contact info in the phonebook.\n  This request for update the contact in the server is made by personsService.update,\n  is used a object to update the info in the server.\n  Then the persons state is update to render the changes on the page.\n  This is part of the 2.18*: Phonebook step10 exercise.\n  In the 2.20: Phonebook step12 exercise was added the catch method for a rejected promise\n  and the message for notificacion for an error and the error handler.*/\n  const updatePerson = (id) => {\n    const personIndex = persons.findIndex(person => person.id === id)\n    const personsUpObject = {\n      ...persons[personIndex],\n      number: tNumber\n    }\n\n    personsService\n      .update(id, personsUpObject)\n      .then(returnedPersons => {\n        setPersons(persons.map(person => person.id !== id ? person : returnedPersons))\n        setNewName('')\n        setTNumber('')\n        setNotificationMessage(`Updated ${personsUpObject.name}`)\n        handlerNotification()\n      })\n      .catch(error => {\n        setNotificationMessage(error.response.data.error)\n        setError(true)\n        errorHandler()\n       /*  setNotificationMessage(`The Contact ${personsUpObject.name} was already remove from server`)\n        setError(true)\n        errorHandler()\n        setPersons(persons.filter(p => p.id !== id)) */\n      })\n  }\n\n  /* This is the handler of the changes of the input.\n  This is part of the 2.6: The Phonebook Step1 exercise. */\n  const handlerNameChange = (event) => setNewName(event.target.value)\n\n  /* This is the handler for the number input onChange\n  This is part of 2.8: The Phonebook Step3 exercise */\n  const handlerAddNumber = (event) => setTNumber(event.target.value)\n\n  /* This is the handler of the changes of the search field input \n  This is part of the 2.9*: The Phonebook Step4 exercise*/\n  const handlerSearchField = (event) => setSearch(event.target.value)\n\n  /* This is the handler of the click in the delete button in\n  the Persons component. It sends the id of the contact that will be deleting from the phonebook\n  by the value send by the button when is clicked.\n  This is part of the 2.17: Phonebook step9 exercise*/\n  const handlerClick = (event) => deletePerson(event.target.value)\n\n  /* This is the handler of the time of screen of the notification. \n  This is part of 2.19: Phonebook step11 exercise*/\n  const handlerNotification = () => {\n    setTimeout(() => {\n      setNotificationMessage(null)\n    }, 5000)\n  }\n\n  /* This is the handler of the time of screen of the error notification. \n  This is part of 2.20*: Phonebook step12 exercise*/\n  const errorHandler = () => {\n    setTimeout(() => {\n      setError(false)\n      setNotificationMessage(null)\n    }, 5000)\n  }\n\n  return (\n    /* Were added the calls of the components that were refactored.\n    FIlter, PersonForm and Persons are the components.\n    This is part of the 2.10: The Phonebook Step5 exercise.\n    Added  the call of the Notification component, \n    This is part of the 2.19: Phonebook step11 exercise*/\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notificationMessage={notificationMessage} errorN={error} />\n      <Filter handler={handlerSearchField} search={search} />\n      <h2>Add a new</h2>\n      <PersonForm handlerNC={handlerNameChange} handlerAN={handlerAddNumber} handlerAP={addPerson} number={tNumber} name={newName} />\n      <h2>Numbers</h2>\n      <Persons persons={persons} search={search} clickChild={handlerClick} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n"],"sourceRoot":""}